---
init_config:
  service: spicedb

instances:
  - openmetrics_endpoint: "http://spicedb:9090/metrics"
    namespace: "spicedb"
    metrics:
      - grpc_server_handling_seconds:
          name: "grpc.server.handling"
          type: "histogram"
      - spicedb_cache_hits:
          name: "cache.hits"
          type: "counter"
      - spicedb_cache_misses:
          name: "cache.misses"
          type: "counter"
      - spicedb_datastore_watching_schema_cache_tracked_revision:
          name: "datastore.watching_schema_cache.tracked_revision"
          type: "gauge"
    histogram_buckets_as_distributions: true
    collect_counters_with_distributions: true
    min_collection_interval: 5
